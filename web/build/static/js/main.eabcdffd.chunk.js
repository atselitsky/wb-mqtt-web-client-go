(this["webpackJsonpwb-app"]=this["webpackJsonpwb-app"]||[]).push([[0],{193:function(e,t,n){},196:function(e,t,n){},273:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"getArticles",(function(){return A}));var c=n(0),i=n(30),s=n.n(i),r=n(99),o=n(1),l=n(56),j=n(32),d=n(295),b=n(74),u=n(302),h=n(303),p=n(304),f=(n(193),n(8)),O=function(){return Object(f.jsx)("div",{className:"navbar-wrapper",children:Object(f.jsxs)(b.a,{className:"navbar",theme:"dark",mode:"horizontal",children:[Object(f.jsx)(b.a.Item,{className:"menu-button",icon:Object(f.jsx)(u.a,{})},"1"),Object(f.jsx)(b.a.Item,{className:"",icon:Object(f.jsx)(h.a,{})},"2"),Object(f.jsx)(b.a.Item,{className:"",icon:Object(f.jsx)(p.a,{})},"3")]})})},g=n(298),x=n(305),m=n(306),v=n(307),y=n(308),C=n(309),_=n(310),k=n(311),N=(n(196),g.a.Text),I=function(){return Object(f.jsxs)("div",{className:"sidebar",children:[Object(f.jsx)(N,{className:"logo",children:"WIREN BOARD"}),Object(f.jsxs)(b.a,{className:"sidebar-menu",theme:"dark",children:[Object(f.jsx)(b.a.Item,{className:"sidebar-item",icon:Object(f.jsx)(x.a,{}),children:"Dashboard"}),Object(f.jsx)(b.a.Item,{className:"sidebar-item",icon:Object(f.jsx)(m.a,{}),children:Object(f.jsx)(l.b,{to:"/topics",children:"Topics"})}),Object(f.jsx)(b.a.Item,{className:"sidebar-item",icon:Object(f.jsx)(v.a,{}),children:"Charts"}),Object(f.jsx)(b.a.Item,{className:"sidebar-item",icon:Object(f.jsx)(y.a,{}),children:Object(f.jsx)(l.b,{to:"/devices",children:"Settings"})},"4"),Object(f.jsx)(b.a.Item,{className:"sidebar-item",icon:Object(f.jsx)(C.a,{}),children:Object(f.jsx)(l.b,{to:"/rules",children:"Rules"})}),Object(f.jsx)(b.a.Item,{className:"sidebar-item",icon:Object(f.jsx)(_.a,{}),children:"Support"}),Object(f.jsx)(b.a.Item,{className:"sidebar-item",icon:Object(f.jsx)(k.a,{}),children:"Permissions"})]})]})},S=n(296),w="ADD_ARTICLE",B="REMOVE_ARTICLE";function T(e){return function(t){t(e)}}var A=function(e){return e.topics.articles},L={articles:[{key:1,path:"/test/topic",body:"ON"},{key:2,path:"/test/topic/on",body:"32.35 C"}]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,n=!1;switch(t.type){case w:var a=e.articles.map((function(e){return t.article.path===e.path?(n=!0,{key:e.key,path:e.path,body:t.article.body}):e}));if(n)return n=!1,Object(o.a)(Object(o.a)({},e),{},{articles:a});var c={key:Math.random(),path:t.article.path,body:t.article.body};return Object(o.a)(Object(o.a)({},e),{},{articles:e.articles.concat(c)});case B:var i=e.articles.filter((function(e){return e.key!==t.article.key}));return Object(o.a)(Object(o.a)({},e),{},{articles:i})}return e},E=new WebSocket("ws://localhost:8080/ws"),V=function(){var e=Object(r.c)(a.getArticles),t=Object(r.b)(),n=c.useCallback((function(e){return t(function(e){return T({type:w,article:e})}(e))}),[t]);return Object(c.useEffect)((function(){E.onopen=function(){console.log("Connected to server localhost:1883!!")},E.onmessage=function(e){var t=JSON.parse(e.data);console.log(t);var a={key:Math.random(),path:t.Path,body:t.Message};n(a)},E.onclose=function(){alert("Connection has been closed")}})),Object(f.jsx)("main",{children:Object(f.jsx)(S.a,{columns:[{title:"Path",dataIndex:"path",key:"path"},{title:"Body",dataIndex:"body",key:"body"}],dataSource:e})})},M=n(60),P=(n(273),g.a.Title),R=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(P,{level:4,children:"\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b"}),Object(f.jsx)(l.b,{to:"/devices/rs-485",children:Object(f.jsx)(M.a,{size:"large",type:"primary",block:!0,children:"RS-485"})}),Object(f.jsx)(M.a,{size:"large",block:!0,children:"\u0411\u0430\u0437\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 SQLite"}),Object(f.jsx)(M.a,{size:"large",block:!0,children:"Modbus"}),Object(f.jsx)(M.a,{size:"large",block:!0,children:"ADC"})]})},z=n(42),F=n.n(z),J=n(58),W=n(14),G=n(15),H=n(17),K=n(16),Q=n(143),q=n.n(Q),U=n(301),X=n(297),Y=n(299),Z=n(300),$=n(100),ee=U.a.Panel,te=X.a.TabPane,ne=function(e){Object(H.a)(n,e);var t=Object(K.a)(n);function n(e){var a;return Object(W.a)(this,n),(a=t.call(this,e)).setLoading=function(e){a.setState(Object(o.a)(Object(o.a)({},a.state),{},{loading:e}))},a.getConfig=Object(J.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setLoading(!0),e.prev=1,e.next=4,q.a.get("http://192.168.1.101:8080/config/rs485");case 4:t=e.sent,a.setState({config:t.data}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,a.setLoading(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,8,10,13]])}))),a.state={config:null,loading:!0},a}return Object(G.a)(n,[{key:"componentDidMount",value:function(){this.setLoading(!0),this.getConfig()}},{key:"changeConfig",value:function(e,t,n,a){this.state.config&&this.setState(Object(o.a)(Object(o.a)({},this.state),{},{config:{debug:!1,ports:this.state.config.ports.map((function(c,i){return i===n?null!=a?(c.devices[a][e]=t,c):(c[e]=t,c):c}))}}))}},{key:"postConfig",value:function(){console.log(this.state.config),q.a.post("http://localhost:8080/config/rs485",JSON.stringify(this.state.config),{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.config;return n?Object(f.jsx)(Y.a,{active:!0}):n||null===a?void 0:Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(X.a,{defaultActiveKey:"1",children:a.ports.map((function(t,n){return Object(f.jsxs)(te,{tab:"\u041f\u043e\u0440\u0442 "+t.path,children:[Object(f.jsx)(M.a,{htmlType:"button",onClick:function(){return e.postConfig()},children:"Save"}),Object(f.jsxs)(Z.a.Group,{size:"large",children:[Object(f.jsx)($.a,{checked:t.enabled,onChange:function(t){return e.changeConfig("enabled",t.target.checked,n)},children:"Enabled"}),Object(f.jsx)(Z.a,{id:"baud_rate_"+n,name:"baud_rate",addonBefore:"baud_rate",defaultValue:t.baud_rate,onChange:function(t){return e.changeConfig("baud_rate",parseInt(t.target.value),n)}}),Object(f.jsx)(Z.a,{id:"parity_"+n,name:"parity",addonBefore:"parity",defaultValue:t.parity,onChange:function(t){return e.changeConfig("parity",t.target.value,n)}}),Object(f.jsx)(Z.a,{id:"data_bits_"+n,name:"data_bits",addonBefore:"data_bits",defaultValue:t.data_bits,onChange:function(t){return e.changeConfig("data_bits",parseInt(t.target.value),n)}}),Object(f.jsx)(Z.a,{id:"stop_bits_"+n,name:"stop_bits",addonBefore:"stop_bits",defaultValue:t.stop_bits,onChange:function(t){return e.changeConfig("stop_bits",parseInt(t.target.value),n)}}),Object(f.jsx)(Z.a,{id:"poll_interval_"+n,name:"poll_interval",addonBefore:"poll_interval",defaultValue:t.poll_interval,onChange:function(t){return e.changeConfig("poll_interval",parseInt(t.target.value),n)}}),Object(f.jsx)(U.a,{children:t.devices.map((function(t,a){return Object(f.jsxs)(ee,{header:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e "+(n+1),children:[Object(f.jsx)(Z.a,{addonBefore:"slave_id",defaultValue:t.slave_id,onChange:function(t){e.changeConfig("slave_id",parseInt(t.target.value),n,a)}}),Object(f.jsx)(Z.a,{addonBefore:"device_type",defaultValue:t.device_type,onChange:function(e){}})]},n)}))})]})]},n)}))})})}}]),n}(c.Component),ae=n(175),ce=n.n(ae),ie=(n(291),function(e){Object(H.a)(n,e);var t=Object(K.a)(n);function n(){var e;Object(W.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).jsoneditor=void 0,e.container=void 0,e.onChangeJSON=function(e){},e}return Object(G.a)(n,[{key:"componentDidMount",value:function(){var e={mode:"code",onChangeText:this.onChangeJSON};this.jsoneditor=new ce.a(this.container,e)}},{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{className:"jsoneditor-react-container",ref:function(t){return e.container=t}})}}]),n}(c.Component));var se=function(e){return Object(f.jsx)(j.a,{path:e.path,exact:e.exact,render:function(t){return Object(f.jsx)(e.component,Object(o.a)(Object(o.a)({},t),{},{routes:e.routes}))}})},re=(n(292),d.a.Header),oe=d.a.Sider,le=d.a.Content,je=[{path:"/topics",component:V},{path:"/devices",exact:!0,component:R},{path:"/devices/rs-485",component:ne},{path:"/rules",component:ie}],de=function(){return Object(f.jsx)(l.a,{children:Object(f.jsxs)(d.a,{children:[Object(f.jsx)(oe,{collapsed:!0,children:Object(f.jsx)(I,{})}),Object(f.jsxs)(d.a,{children:[Object(f.jsx)(re,{className:"sider",children:Object(f.jsx)(O,{})}),Object(f.jsx)(le,{className:"content",children:Object(f.jsx)(j.c,{children:je.map((function(e,t){return Object(f.jsx)(se,Object(o.a)({},e),t)}))})})]})]})})},be=n(88),ue=n(176),he=Object(be.c)({topics:D}),pe=Object(be.d)(he,Object(be.a)(ue.a)),fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,312)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),i(e),s(e)}))};s.a.render(Object(f.jsx)(r.a,{store:pe,children:Object(f.jsx)(de,{})}),document.getElementById("root")),fe()}},[[293,1,2]]]);
//# sourceMappingURL=main.eabcdffd.chunk.js.map