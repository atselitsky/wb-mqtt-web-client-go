<html>
  <head>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  </head>

  <body>
    <h3>WebSocket Go</h3>
    <pre id="output"></pre>

        <script>
                $(function(){
        var socket = null;
        var messages = $("#output");
        url = 'ws://localhost:8080/ws';
        socket = new WebSocket(url);
        
        socket.onclose = function(){
                alert("Connection has been closed")
        }

        send = function(data){
        messages.append((new Date())+ " ==> "+data+"\n")
        socket.send(data)
        }

        socket.onmessage = function(e){
        var msg = JSON.parse(e.data)
        messages.append(
                msg.Message + msg.Path + msg.When
        )
        }       
        // socket.onopen = function(){
        // setInterval( 
        //         function(){ send("ping") }
        // , 1000 )
        // }    
                })

        </script>

        </body>
</html>